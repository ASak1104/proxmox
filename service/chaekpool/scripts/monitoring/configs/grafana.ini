[server]
http_port = 3000
root_url = https://grafana.cp.codingmon.dev

[security]
admin_user = admin
admin_password = changeme

[paths]
data = /var/lib/grafana
logs = /var/log/grafana
plugins = /var/lib/grafana/plugins
provisioning = /etc/grafana/provisioning

[users]
allow_sign_up = true

[auth]
oauth_allow_insecure_email_lookup = true

[log]
mode = file
level = info

[log.file]
log_rotate = true
max_lines = 100000

[auth.generic_oauth]
enabled = true
allow_sign_up = true
name = Authelia
client_id = grafana
client_secret = changeme
scopes = openid profile email groups
auth_url = https://authelia.cp.codingmon.dev/api/oidc/authorization
token_url = https://authelia.cp.codingmon.dev/api/oidc/token
api_url = https://authelia.cp.codingmon.dev/api/oidc/userinfo
login_attribute_path = preferred_username
email_attribute_path = email
groups_attribute_path = groups
name_attribute_path = name
use_pkce = true
role_attribute_path = contains(groups[*], 'admins') && 'Admin' || 'Viewer'
